-- Schema generated via REST API and RPC

CREATE TABLE IF NOT EXISTS public."about_page_cms" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "section_name" character varying NOT NULL,
    "section_type" character varying NOT NULL,
    "title" text,
    "subtitle" text,
    "description" text,
    "content" text,
    "image_url" text,
    "is_active" boolean DEFAULT true,
    "sort_order" integer DEFAULT 0,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."achievements" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "title" character varying NOT NULL,
    "description" text,
    "year" character varying NOT NULL,
    "icon" character varying,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."bank_accounts" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "account_name" text NOT NULL,
    "account_number" text NOT NULL,
    "bank_name" text NOT NULL,
    "ifsc_code" text,
    "branch_name" text,
    "upi_id" text,
    "qr_code_url" text,
    "is_primary" boolean DEFAULT false,
    "is_active" boolean DEFAULT true,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."bank_transfer_orders" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "order_number" text NOT NULL,
    "business_id" uuid,
    "package_id" uuid,
    "bank_account_id" uuid,
    "original_amount" numeric NOT NULL,
    "discount_amount" numeric DEFAULT 0,
    "final_amount" numeric NOT NULL,
    "currency" text DEFAULT 'INR'::text,
    "status" text DEFAULT 'pending'::text,
    "proof_url" text,
    "proof_uploaded_at" timestamp with time zone,
    "transaction_reference" text,
    "user_notes" text,
    "admin_notes" text,
    "verified_by" uuid,
    "verified_at" timestamp with time zone,
    "rejected_reason" text,
    "subscription_id" uuid,
    "expires_at" timestamp with time zone DEFAULT (now() + '48:00:00'::interval),
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now(),
    "coupon_id" uuid,
    "coupon_code" text,
    "subtotal_amount" numeric
);

CREATE TABLE IF NOT EXISTS public."brands" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "brand_name" character varying NOT NULL,
    "description" text,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now(),
    "business_id" uuid NOT NULL,
    "logo_url" text
);

CREATE TABLE IF NOT EXISTS public."business_domains" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "business_id" uuid NOT NULL,
    "domain" text NOT NULL,
    "type" text NOT NULL,
    "is_verified" boolean NOT NULL DEFAULT false,
    "has_ssl" boolean NOT NULL DEFAULT false,
    "status" text NOT NULL DEFAULT 'pending'::text,
    "created_at" timestamp with time zone NOT NULL DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."business_label_settings" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "business_id" uuid NOT NULL,
    "default_label_format" character varying DEFAULT 'Standard'::character varying,
    "default_labels_per_row" integer DEFAULT 3,
    "default_barcode_type" character varying DEFAULT 'CODE128'::character varying,
    "default_barcode_size" character varying DEFAULT 'Medium'::character varying,
    "show_product_name" boolean DEFAULT true,
    "show_sku" boolean DEFAULT true,
    "show_price" boolean DEFAULT true,
    "show_barcode" boolean DEFAULT true,
    "show_business_name" boolean DEFAULT false,
    "show_business_logo" boolean DEFAULT false,
    "custom_label_width" numeric DEFAULT NULL::numeric,
    "custom_label_height" numeric DEFAULT NULL::numeric,
    "currency_symbol" character varying DEFAULT 'â‚¹'::character varying,
    "currency_position" character varying DEFAULT 'before'::character varying,
    "price_decimal_places" integer DEFAULT 2,
    "default_printer_type" character varying DEFAULT 'pdf'::character varying,
    "default_printer_name" character varying DEFAULT NULL::character varying,
    "default_printer_port" character varying DEFAULT NULL::character varying,
    "print_speed" integer DEFAULT 5,
    "print_density" integer DEFAULT 10,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."business_label_templates" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "business_id" uuid NOT NULL,
    "template_name" character varying NOT NULL,
    "template_description" text,
    "is_default" boolean DEFAULT false,
    "is_active" boolean DEFAULT true,
    "label_width" numeric NOT NULL,
    "label_height" numeric NOT NULL,
    "gap_height" numeric DEFAULT 3.0,
    "layout_config" jsonb NOT NULL,
    "preview_image_url" text,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now(),
    "created_by" uuid
);

CREATE TABLE IF NOT EXISTS public."business_locations" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "name" character varying NOT NULL,
    "location_id" character varying NOT NULL,
    "landmark" character varying,
    "city" character varying NOT NULL,
    "state" character varying NOT NULL,
    "zip_code" character varying NOT NULL,
    "country" character varying NOT NULL,
    "mobile" character varying,
    "email" character varying,
    "alternate_contact_number" character varying,
    "website" character varying,
    "invoice_scheme_pos" character varying DEFAULT 'Default'::character varying,
    "invoice_layout_pos" character varying DEFAULT 'Default'::character varying,
    "invoice_scheme_sale" character varying DEFAULT 'Default'::character varying,
    "invoice_layout_sale" character varying DEFAULT 'Default'::character varying,
    "default_selling_price_group_id" uuid,
    "business_id" uuid NOT NULL,
    "is_active" boolean DEFAULT true,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now(),
    "created_by" uuid,
    "updated_by" uuid,
    "is_default" boolean DEFAULT false
);

CREATE TABLE IF NOT EXISTS public."business_payment_methods" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "business_id" uuid NOT NULL,
    "global_payment_method_id" uuid NOT NULL,
    "is_active" boolean DEFAULT true,
    "is_default" boolean DEFAULT false,
    "name" text NOT NULL,
    "code" text NOT NULL,
    "icon" text,
    "sort_order" integer DEFAULT 0,
    "created_by" uuid,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."business_settings" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "business_id" uuid,
    "setting_type" text NOT NULL,
    "settings" jsonb DEFAULT '{}'::jsonb,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."business_subscriptions" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "business_id" uuid NOT NULL,
    "package_id" uuid NOT NULL,
    "status" text NOT NULL DEFAULT 'active'::text,
    "start_date" date NOT NULL,
    "end_date" date,
    "trial_end_date" date,
    "auto_renew" boolean DEFAULT true,
    "current_price" numeric NOT NULL,
    "billing_cycle" text DEFAULT 'monthly'::text,
    "next_billing_date" date,
    "payment_method_id" uuid,
    "notes" text,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now(),
    "cancelled_at" timestamp with time zone,
    "cancelled_by" uuid
);

CREATE TABLE IF NOT EXISTS public."business_trial_usage" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "business_id" uuid NOT NULL,
    "trial_used_at" timestamp with time zone DEFAULT now(),
    "is_manual_override" boolean DEFAULT false,
    "overridden_by" uuid,
    "subscription_id" uuid,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."businesses" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "business_name" character varying NOT NULL,
    "start_date" date,
    "logo_url" text,
    "business_contact" character varying,
    "country" character varying NOT NULL,
    "city" character varying NOT NULL,
    "landmark" character varying NOT NULL,
    "state" character varying NOT NULL,
    "zip_code" character varying NOT NULL,
    "currency" character varying NOT NULL DEFAULT 'USD'::character varying,
    "website" character varying,
    "alternate_contact" character varying,
    "timezone" character varying NOT NULL DEFAULT 'Asia/Kolkata'::character varying,
    "tax1_name" character varying,
    "tax1_number" character varying,
    "tax2_name" character varying,
    "tax2_number" character varying,
    "financial_year_start" character varying NOT NULL DEFAULT 'January'::character varying,
    "stock_accounting_method" character varying NOT NULL DEFAULT 'FIFO (First In First Out)'::character varying,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."categories" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "category_name" character varying NOT NULL,
    "category_code" character varying,
    "description" text,
    "business_id" uuid NOT NULL,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now(),
    "parent_category_id" uuid,
    "hsn_code" character varying
);

CREATE TABLE IF NOT EXISTS public."contact_faqs" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "question" text NOT NULL,
    "answer" text NOT NULL,
    "category" character varying DEFAULT 'general'::character varying,
    "is_active" boolean DEFAULT true,
    "sort_order" integer DEFAULT 0,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."contact_info" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "type" character varying NOT NULL,
    "label" character varying NOT NULL,
    "value" text NOT NULL,
    "icon" character varying,
    "is_active" boolean DEFAULT true,
    "sort_order" integer DEFAULT 0,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."contact_page_cms" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "section_name" character varying NOT NULL,
    "section_type" character varying NOT NULL,
    "title" text,
    "subtitle" text,
    "description" text,
    "content" text,
    "image_url" text,
    "is_active" boolean DEFAULT true,
    "sort_order" integer DEFAULT 0,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."contact_submissions" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "name" character varying NOT NULL,
    "email" character varying NOT NULL,
    "subject" character varying NOT NULL,
    "message" text NOT NULL,
    "category" character varying DEFAULT 'general'::character varying,
    "status" character varying DEFAULT 'new'::character varying,
    "priority" character varying DEFAULT 'medium'::character varying,
    "assigned_to" uuid,
    "admin_notes" text,
    "response_sent" boolean DEFAULT false,
    "response_message" text,
    "response_sent_at" timestamp with time zone,
    "response_sent_by" uuid,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."contacts" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "contact_id" character varying NOT NULL,
    "contact_type" character varying DEFAULT 'customer'::character varying,
    "customer_type" character varying DEFAULT 'individual'::character varying,
    "prefix" character varying,
    "first_name" character varying,
    "last_name" character varying,
    "business_name" character varying,
    "email" character varying,
    "mobile" character varying,
    "alternate_contact_number" character varying,
    "landline" character varying,
    "customer_group_id" uuid,
    "assigned_to" uuid,
    "tax_number" character varying,
    "credit_limit" numeric DEFAULT 0.00,
    "pay_term" character varying,
    "opening_balance" numeric DEFAULT 0.00,
    "advance_balance" numeric DEFAULT 0.00,
    "address_line_1" text,
    "address_line_2" text,
    "city" character varying,
    "state" character varying,
    "country" character varying,
    "zip_code" character varying,
    "landmark" character varying,
    "street_name" character varying,
    "building_number" character varying,
    "additional_number" character varying,
    "is_active" boolean DEFAULT true,
    "business_id" uuid NOT NULL,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now(),
    "created_by" uuid,
    "updated_by" uuid,
    "is_walk_in" boolean DEFAULT false,
    "total_due_amount" numeric DEFAULT 0.0
);

CREATE TABLE IF NOT EXISTS public."countries" (
    "id" integer NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    "name" character varying NOT NULL,
    "code" character varying NOT NULL,
    "enabled" boolean DEFAULT true,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now(),
    "currency" character varying,
    "timezone_id" integer
);

CREATE TABLE IF NOT EXISTS public."country_codes" (
    "id" integer NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    "country_name" character varying NOT NULL,
    "country_code" character varying NOT NULL,
    "dialing_code" character varying NOT NULL,
    "flag_emoji" character varying,
    "enabled" boolean DEFAULT true,
    "sort_order" integer DEFAULT 0,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."coupons" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "code" text NOT NULL,
    "discount_type" text NOT NULL,
    "discount_value" numeric NOT NULL,
    "min_purchase_amount" numeric DEFAULT 0,
    "valid_from" timestamp with time zone DEFAULT now(),
    "valid_until" timestamp with time zone,
    "usage_limit" integer,
    "usage_count" integer DEFAULT 0,
    "is_active" boolean DEFAULT true,
    "applicable_plans" text[],
    "created_by" uuid,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."currencies" (
    "id" integer NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    "code" character varying NOT NULL,
    "name" character varying NOT NULL,
    "symbol" character varying,
    "symbol_position" character varying DEFAULT 'Before amount'::character varying,
    "decimal_places" integer DEFAULT 2,
    "enabled" boolean DEFAULT true,
    "sort_order" integer DEFAULT 0,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."customer_balance_details" (
    "customer_id" uuid,
    "business_id" uuid,
    "contact_id" character varying,
    "first_name" character varying,
    "last_name" character varying,
    "business_name" character varying,
    "mobile" character varying,
    "email" character varying,
    "total_due_amount" numeric,
    "credit_sales_count" bigint,
    "oldest_due_date" timestamp with time zone,
    "latest_due_date" timestamp with time zone,
    "calculated_due_amount" numeric
);

CREATE TABLE IF NOT EXISTS public."customer_groups" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "name" character varying NOT NULL,
    "calculation_percentage" numeric NOT NULL DEFAULT 0.00,
    "price_calculation_type" character varying NOT NULL DEFAULT 'percentage'::character varying,
    "is_active" boolean NOT NULL DEFAULT true,
    "business_id" uuid NOT NULL,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."discount_products" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "discount_id" uuid NOT NULL,
    "product_id" uuid NOT NULL,
    "business_id" uuid NOT NULL,
    "created_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."discounts" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "business_id" uuid NOT NULL,
    "name" text NOT NULL,
    "discount_type" text NOT NULL,
    "discount_amount" numeric NOT NULL,
    "location_id" uuid NOT NULL,
    "brand_id" uuid,
    "category_id" uuid,
    "selling_price_group_id" uuid,
    "priority" integer DEFAULT 0,
    "starts_at" timestamp with time zone,
    "ends_at" timestamp with time zone,
    "is_active" boolean DEFAULT true,
    "apply_in_customer_groups" boolean DEFAULT false,
    "created_by" uuid,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone
);

CREATE TABLE IF NOT EXISTS public."expense_categories" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "business_id" uuid NOT NULL,
    "name" character varying NOT NULL,
    "description" text,
    "color" character varying,
    "is_active" boolean DEFAULT true,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now(),
    "budget_limit" numeric,
    "budget_period" character varying DEFAULT 'monthly'::character varying,
    "budget_alert_threshold" integer DEFAULT 80,
    "tax_deductible" boolean DEFAULT false,
    "tax_rate" numeric,
    "gl_account_code" character varying,
    "cost_center_id" uuid,
    "requires_approval" boolean DEFAULT false,
    "minimum_approval_amount" numeric,
    "parent_category_id" uuid,
    "sort_order" integer DEFAULT 0,
    "icon_name" character varying,
    "icon_image_url" text,
    "background_color" character varying,
    "is_default" boolean DEFAULT false,
    "is_system" boolean DEFAULT false,
    "department_id" uuid,
    "default_location_id" uuid,
    "default_payment_method" character varying,
    "notes" text,
    "created_by" uuid,
    "last_modified_by" uuid,
    "approval_level" character varying DEFAULT 'single'::character varying,
    "auto_approve" boolean DEFAULT false,
    "auto_approve_amount" numeric,
    "category_level" integer DEFAULT 1,
    "tags" text[],
    "external_id" character varying,
    "sync_status" character varying
);

CREATE TABLE IF NOT EXISTS public."expenses" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "business_id" uuid NOT NULL,
    "expense_number" character varying NOT NULL,
    "expense_date" timestamp with time zone NOT NULL,
    "category_id" uuid,
    "amount" numeric NOT NULL,
    "payment_method" character varying NOT NULL DEFAULT 'cash'::character varying,
    "description" text,
    "location_id" uuid,
    "supplier_id" uuid,
    "user_id" uuid,
    "receipt_url" text,
    "status" character varying DEFAULT 'approved'::character varying,
    "notes" text,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."global_payment_methods" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "name" text NOT NULL,
    "code" text NOT NULL,
    "icon" text,
    "is_active" boolean DEFAULT true,
    "is_available_for_business" boolean DEFAULT true,
    "sort_order" integer DEFAULT 0,
    "created_by" uuid,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."homepage_cms" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "section_name" character varying NOT NULL,
    "section_type" character varying NOT NULL,
    "title" text,
    "subtitle" text,
    "description" text,
    "content" jsonb,
    "is_active" boolean DEFAULT true,
    "sort_order" integer DEFAULT 0,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now(),
    "created_by" uuid,
    "updated_by" uuid
);

CREATE TABLE IF NOT EXISTS public."label_print_history" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "business_id" uuid NOT NULL,
    "template_id" uuid,
    "printed_by" uuid NOT NULL,
    "products_printed" jsonb NOT NULL,
    "total_labels_printed" integer NOT NULL,
    "settings_used" jsonb NOT NULL,
    "status" character varying DEFAULT 'completed'::character varying,
    "error_message" text,
    "printed_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."office_locations" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "name" character varying NOT NULL,
    "address" text NOT NULL,
    "city" character varying NOT NULL,
    "state" character varying,
    "country" character varying NOT NULL,
    "postal_code" character varying,
    "phone" character varying,
    "email" character varying,
    "hours" text,
    "is_active" boolean DEFAULT true,
    "sort_order" integer DEFAULT 0,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."opening_stock" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "product_id" uuid,
    "location" character varying NOT NULL,
    "quantity" integer NOT NULL DEFAULT 0,
    "unit_cost" numeric NOT NULL DEFAULT 0,
    "lot_number" character varying,
    "subtotal" numeric NOT NULL DEFAULT 0,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."package_features" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "package_id" uuid NOT NULL,
    "feature_id" uuid NOT NULL,
    "limit_value" integer,
    "is_unlimited" boolean DEFAULT false,
    "created_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."permission_requests" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "user_id" uuid NOT NULL,
    "permission_code" character varying NOT NULL,
    "reason" text,
    "status" character varying DEFAULT 'pending'::character varying,
    "requested_at" timestamp with time zone DEFAULT now(),
    "reviewed_at" timestamp with time zone,
    "reviewed_by" uuid,
    "reviewer_notes" text,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."permissions" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "code" character varying NOT NULL,
    "display_name" character varying NOT NULL,
    "description" text,
    "category" character varying NOT NULL,
    "subcategory" character varying,
    "is_active" boolean DEFAULT true,
    "sort_order" integer DEFAULT 0,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."prefixes" (
    "id" integer NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    "name" character varying NOT NULL,
    "display_name" character varying NOT NULL,
    "enabled" boolean DEFAULT true,
    "sort_order" integer DEFAULT 0,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."product_imei_serial" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "business_id" uuid,
    "product_id" uuid NOT NULL,
    "product_stock_price_id" uuid,
    "type" text,
    "imei" text,
    "serial" text,
    "is_sold" boolean DEFAULT false,
    "created_at" timestamp with time zone NOT NULL DEFAULT now(),
    "updated_at" timestamp with time zone NOT NULL DEFAULT now(),
    "created_by" uuid,
    "updated_by" uuid,
    "business_location_id" uuid
);

CREATE TABLE IF NOT EXISTS public."product_locations" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "product_id" uuid NOT NULL,
    "business_location_id" uuid NOT NULL,
    "business_id" uuid,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."product_stock_price" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "business_id" uuid,
    "product_id" uuid NOT NULL,
    "supplier_id" uuid,
    "unit_price" numeric DEFAULT 0,
    "default_selling_price" numeric DEFAULT 0,
    "stock" numeric DEFAULT 0,
    "sold" integer DEFAULT 0,
    "status" text DEFAULT 'active'::text,
    "note" text,
    "created_at" timestamp with time zone NOT NULL DEFAULT now(),
    "updated_at" timestamp with time zone NOT NULL DEFAULT now(),
    "created_by" uuid,
    "updated_by" uuid,
    "business_location_id" uuid,
    "manufacturing_date" date,
    "expiry_date" date
);

CREATE TABLE IF NOT EXISTS public."products" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "business_id" uuid,
    "name" text NOT NULL,
    "image_url" text,
    "sku" text,
    "barcode_type" text,
    "status" text DEFAULT 'active'::text,
    "description" text,
    "is_serial_imei" boolean DEFAULT false,
    "created_at" timestamp with time zone NOT NULL DEFAULT now(),
    "updated_at" timestamp with time zone NOT NULL DEFAULT now(),
    "created_by" uuid,
    "updated_by" uuid,
    "units_id" uuid,
    "warranties_id" uuid,
    "brand_id" uuid,
    "category_id" uuid,
    "manage_stock" boolean DEFAULT true,
    "alert_quantity" integer,
    "expiry_date" boolean DEFAULT false
);

CREATE TABLE IF NOT EXISTS public."purchase_items" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "purchase_id" uuid NOT NULL,
    "product_id" uuid NOT NULL,
    "business_id" uuid NOT NULL,
    "business_location_id" uuid,
    "quantity" numeric NOT NULL DEFAULT 1.00,
    "unit_price" numeric NOT NULL DEFAULT 0.00,
    "default_selling_price" numeric DEFAULT 0.00,
    "tax_rate" numeric DEFAULT 0.00,
    "tax_amount" numeric DEFAULT 0.00,
    "discount_amount" numeric DEFAULT 0.00,
    "discount_type" character varying,
    "total_amount" numeric NOT NULL DEFAULT 0.00,
    "received_quantity" numeric NOT NULL DEFAULT 0.00,
    "is_received" boolean DEFAULT false,
    "status" character varying DEFAULT 'active'::character varying,
    "stock_price_entry_id" uuid,
    "notes" text,
    "created_at" timestamp with time zone NOT NULL DEFAULT now(),
    "updated_at" timestamp with time zone NOT NULL DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."purchase_return_items" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "return_id" uuid NOT NULL,
    "purchase_item_id" uuid NOT NULL,
    "product_id" uuid NOT NULL,
    "product_name" text NOT NULL,
    "quantity" integer NOT NULL,
    "unit_price" numeric NOT NULL DEFAULT 0.00,
    "tax_rate" numeric NOT NULL DEFAULT 0.00,
    "tax_amount" numeric NOT NULL DEFAULT 0.00,
    "discount_amount" numeric NOT NULL DEFAULT 0.00,
    "subtotal" numeric NOT NULL DEFAULT 0.00,
    "total" numeric NOT NULL DEFAULT 0.00,
    "reason" text,
    "condition" text,
    "created_at" timestamp with time zone NOT NULL DEFAULT now(),
    "updated_at" timestamp with time zone NOT NULL DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."purchase_returns" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "business_id" uuid NOT NULL,
    "return_number" text NOT NULL,
    "original_purchase_id" uuid NOT NULL,
    "supplier_id" uuid,
    "return_date" timestamp with time zone NOT NULL DEFAULT now(),
    "subtotal" numeric NOT NULL DEFAULT 0.00,
    "discount" numeric NOT NULL DEFAULT 0.00,
    "tax" numeric NOT NULL DEFAULT 0.00,
    "total_amount" numeric NOT NULL DEFAULT 0.00,
    "status" text NOT NULL DEFAULT 'pending'::text,
    "reason" text,
    "refund_method" text,
    "notes" text,
    "created_by" uuid NOT NULL,
    "created_at" timestamp with time zone NOT NULL DEFAULT now(),
    "updated_at" timestamp with time zone NOT NULL DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."purchases" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "business_id" uuid NOT NULL,
    "purchase_number" character varying NOT NULL,
    "supplier_id" uuid,
    "purchase_date" date NOT NULL DEFAULT CURRENT_DATE,
    "due_date" date,
    "status" character varying NOT NULL DEFAULT 'pending'::character varying,
    "subtotal" numeric NOT NULL DEFAULT 0.00,
    "tax_amount" numeric NOT NULL DEFAULT 0.00,
    "discount_amount" numeric NOT NULL DEFAULT 0.00,
    "discount_type" character varying,
    "total_amount" numeric NOT NULL DEFAULT 0.00,
    "paid_amount" numeric NOT NULL DEFAULT 0.00,
    "payment_status" character varying NOT NULL DEFAULT 'pending'::character varying,
    "payment_method" character varying,
    "reference_number" character varying,
    "notes" text,
    "created_by" uuid,
    "updated_by" uuid,
    "created_at" timestamp with time zone NOT NULL DEFAULT now(),
    "updated_at" timestamp with time zone NOT NULL DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."return_items" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "return_id" uuid NOT NULL,
    "sale_item_id" uuid NOT NULL,
    "product_id" uuid NOT NULL,
    "product_name" text NOT NULL,
    "quantity" integer NOT NULL,
    "unit_price" numeric NOT NULL DEFAULT 0.00,
    "tax_rate" numeric NOT NULL DEFAULT 0.00,
    "tax_amount" numeric NOT NULL DEFAULT 0.00,
    "discount_amount" numeric NOT NULL DEFAULT 0.00,
    "subtotal" numeric NOT NULL DEFAULT 0.00,
    "total" numeric NOT NULL DEFAULT 0.00,
    "reason" text,
    "condition" text,
    "imei" text,
    "serial_number" text,
    "created_at" timestamp with time zone NOT NULL DEFAULT now(),
    "updated_at" timestamp with time zone NOT NULL DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."role_permissions" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "role_id" uuid NOT NULL,
    "permission_id" uuid NOT NULL,
    "settings" jsonb DEFAULT '{}'::jsonb,
    "granted_at" timestamp with time zone DEFAULT now(),
    "granted_by" uuid
);

CREATE TABLE IF NOT EXISTS public."sale_items" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "sale_id" uuid NOT NULL,
    "product_id" uuid NOT NULL,
    "product_name" text NOT NULL,
    "quantity" numeric NOT NULL DEFAULT 1.000,
    "unit_price" numeric NOT NULL DEFAULT 0.00,
    "tax_rate" numeric NOT NULL DEFAULT 0.00,
    "tax_amount" numeric NOT NULL DEFAULT 0.00,
    "discount_amount" numeric NOT NULL DEFAULT 0.00,
    "subtotal" numeric NOT NULL DEFAULT 0.00,
    "total" numeric NOT NULL DEFAULT 0.00,
    "imei" text,
    "serial_number" text,
    "created_at" timestamp with time zone NOT NULL DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."sale_payments" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "sale_id" uuid NOT NULL,
    "payment_method_id" uuid,
    "payment_method_code" character varying NOT NULL,
    "payment_method_name" character varying NOT NULL,
    "amount" numeric NOT NULL,
    "reference_number" character varying,
    "notes" text,
    "created_at" timestamp with time zone DEFAULT now(),
    "created_by" uuid
);

CREATE TABLE IF NOT EXISTS public."sales" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "business_id" uuid NOT NULL,
    "sale_number" text NOT NULL,
    "customer_id" uuid,
    "location" text NOT NULL,
    "transaction_date" timestamp with time zone NOT NULL,
    "subtotal" numeric NOT NULL DEFAULT 0.00,
    "discount" numeric NOT NULL DEFAULT 0.00,
    "tax" numeric NOT NULL DEFAULT 0.00,
    "shipping" numeric NOT NULL DEFAULT 0.00,
    "total" numeric NOT NULL DEFAULT 0.00,
    "payment_method" text DEFAULT 'cash'::text,
    "status" text NOT NULL DEFAULT 'completed'::text,
    "created_by" uuid NOT NULL,
    "created_at" timestamp with time zone NOT NULL DEFAULT now(),
    "updated_at" timestamp with time zone NOT NULL DEFAULT now(),
    "due_amount" numeric DEFAULT 0.0,
    "is_credit_sale" boolean DEFAULT false,
    "total_paid" numeric DEFAULT 0.0,
    "business_location_id" uuid
);

CREATE TABLE IF NOT EXISTS public."sales_commission_agents" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "name" character varying NOT NULL,
    "email" character varying NOT NULL,
    "contact_number" character varying,
    "address" text,
    "sales_commission_percentage" numeric NOT NULL,
    "business_id" uuid NOT NULL,
    "is_active" boolean DEFAULT true,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."sales_returns" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "business_id" uuid NOT NULL,
    "return_number" text NOT NULL,
    "original_sale_id" uuid NOT NULL,
    "customer_id" uuid,
    "return_date" timestamp with time zone NOT NULL DEFAULT now(),
    "subtotal" numeric NOT NULL DEFAULT 0.00,
    "discount" numeric NOT NULL DEFAULT 0.00,
    "tax" numeric NOT NULL DEFAULT 0.00,
    "shipping" numeric NOT NULL DEFAULT 0.00,
    "total_amount" numeric NOT NULL DEFAULT 0.00,
    "status" text NOT NULL DEFAULT 'pending'::text,
    "reason" text,
    "refund_method" text,
    "notes" text,
    "created_by" uuid NOT NULL,
    "created_at" timestamp with time zone NOT NULL DEFAULT now(),
    "updated_at" timestamp with time zone NOT NULL DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."selling_price_groups" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "group_name" character varying NOT NULL,
    "description" text,
    "color" character varying,
    "business_id" uuid NOT NULL,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."seo_analytics" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "date" date NOT NULL,
    "total_clicks" integer DEFAULT 0,
    "total_impressions" integer DEFAULT 0,
    "average_ctr" numeric DEFAULT 0,
    "average_position" numeric DEFAULT 0,
    "organic_sessions" integer DEFAULT 0,
    "organic_users" integer DEFAULT 0,
    "organic_pageviews" integer DEFAULT 0,
    "organic_bounce_rate" numeric DEFAULT 0,
    "top_pages" jsonb DEFAULT '[]'::jsonb,
    "top_keywords" jsonb DEFAULT '[]'::jsonb,
    "lcp_score" numeric,
    "fid_score" numeric,
    "cls_score" numeric,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."seo_issues" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "issue_type" character varying NOT NULL,
    "issue_severity" character varying NOT NULL DEFAULT 'medium'::character varying,
    "issue_title" character varying NOT NULL,
    "issue_description" text,
    "affected_url" text,
    "affected_page_slug" character varying,
    "error_code" character varying,
    "error_message" text,
    "technical_details" jsonb,
    "is_resolved" boolean DEFAULT false,
    "resolved_at" timestamp with time zone,
    "resolution_notes" text,
    "is_active" boolean DEFAULT true,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."seo_keywords" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "keyword" character varying NOT NULL,
    "target_url" character varying,
    "target_page_slug" character varying,
    "search_volume" integer DEFAULT 0,
    "difficulty_score" integer DEFAULT 0,
    "current_ranking" integer,
    "target_ranking" integer,
    "last_checked" timestamp with time zone,
    "ranking_history" jsonb DEFAULT '[]'::jsonb,
    "is_active" boolean DEFAULT true,
    "is_primary" boolean DEFAULT false,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."seo_pages" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "page_slug" character varying NOT NULL,
    "page_title" character varying NOT NULL,
    "page_description" text,
    "page_keywords" text,
    "custom_title" character varying,
    "custom_description" text,
    "custom_keywords" text,
    "og_title" character varying,
    "og_description" text,
    "og_image_url" text,
    "og_type" character varying DEFAULT 'article'::character varying,
    "twitter_title" character varying,
    "twitter_description" text,
    "twitter_image_url" text,
    "structured_data" jsonb,
    "canonical_url" text,
    "robots_index" boolean DEFAULT true,
    "robots_follow" boolean DEFAULT true,
    "robots_noarchive" boolean DEFAULT false,
    "robots_nosnippet" boolean DEFAULT false,
    "sitemap_include" boolean DEFAULT true,
    "sitemap_priority" numeric DEFAULT 0.8,
    "sitemap_changefreq" character varying DEFAULT 'weekly'::character varying,
    "is_active" boolean DEFAULT true,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."seo_settings" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "site_title" character varying NOT NULL DEFAULT 'Pola Dashboard'::character varying,
    "site_description" text,
    "site_keywords" text,
    "site_author" character varying,
    "site_language" character varying DEFAULT 'en'::character varying,
    "default_title" character varying,
    "default_description" text,
    "default_keywords" text,
    "title_separator" character varying DEFAULT '|'::character varying,
    "title_template" character varying DEFAULT '{page_title} {separator} {site_title}'::character varying,
    "og_site_name" character varying,
    "og_default_image_url" text,
    "og_default_type" character varying DEFAULT 'website'::character varying,
    "og_locale" character varying DEFAULT 'en_US'::character varying,
    "twitter_site" character varying,
    "twitter_creator" character varying,
    "twitter_card_type" character varying DEFAULT 'summary_large_image'::character varying,
    "organization_schema" jsonb,
    "website_schema" jsonb,
    "breadcrumb_schema" jsonb,
    "canonical_url" text,
    "robots_txt_content" text,
    "sitemap_enabled" boolean DEFAULT true,
    "sitemap_priority" numeric DEFAULT 0.8,
    "sitemap_changefreq" character varying DEFAULT 'weekly'::character varying,
    "google_analytics_id" character varying,
    "google_search_console_verification" text,
    "google_tag_manager_id" character varying,
    "facebook_pixel_id" character varying,
    "bing_webmaster_verification" text,
    "enable_gzip" boolean DEFAULT true,
    "enable_minification" boolean DEFAULT true,
    "enable_caching" boolean DEFAULT true,
    "cache_duration" integer DEFAULT 3600,
    "facebook_url" text,
    "twitter_url" text,
    "linkedin_url" text,
    "instagram_url" text,
    "youtube_url" text,
    "contact_email" character varying,
    "contact_phone" character varying,
    "business_address" text,
    "business_city" character varying,
    "business_state" character varying,
    "business_country" character varying,
    "business_postal_code" character varying,
    "last_seo_check" timestamp with time zone,
    "seo_score" integer DEFAULT 0,
    "seo_issues" jsonb DEFAULT '[]'::jsonb,
    "is_active" boolean DEFAULT true,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."site_settings" (
    "id" character varying NOT NULL DEFAULT 'main'::character varying,
    "settings" jsonb NOT NULL DEFAULT '{}'::jsonb,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."stock_adjustment_history" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "adjustment_id" uuid NOT NULL,
    "action" text NOT NULL,
    "performed_by" uuid NOT NULL,
    "notes" text,
    "created_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."stock_adjustment_items" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "adjustment_id" uuid NOT NULL,
    "product_id" uuid NOT NULL,
    "current_quantity" numeric DEFAULT 0,
    "adjusted_quantity" numeric NOT NULL,
    "new_quantity" numeric NOT NULL,
    "unit_cost" numeric DEFAULT 0,
    "total_cost" numeric DEFAULT 0,
    "reason" text,
    "created_at" timestamp with time zone DEFAULT now(),
    "imei_number" text
);

CREATE TABLE IF NOT EXISTS public."stock_adjustments" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "adjustment_number" text,
    "location_id" uuid NOT NULL,
    "adjustment_date" timestamp with time zone DEFAULT now(),
    "adjustment_type" text NOT NULL,
    "reason" text,
    "notes" text,
    "total_items" integer DEFAULT 0,
    "adjusted_by" uuid NOT NULL,
    "status" text DEFAULT 'draft'::text,
    "approved_by" uuid,
    "approved_at" timestamp with time zone,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."stock_transfer_item_imeis" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "stock_transfer_item_id" uuid,
    "imei_number" text,
    "type" text,
    "created_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."stock_transfer_items" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "transfer_id" uuid NOT NULL,
    "product_id" uuid NOT NULL,
    "quantity" numeric NOT NULL,
    "received_quantity" numeric DEFAULT 0,
    "created_at" timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now()),
    "imei" text,
    "serial_number" text,
    "quantity_received" numeric DEFAULT 0,
    "unit_price" numeric DEFAULT 0,
    "subtotal" numeric DEFAULT 0,
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."stock_transfers" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "reference_no" text NOT NULL,
    "source_location_id" uuid,
    "destination_location_id" uuid,
    "status" text NOT NULL,
    "transfer_date" timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now()),
    "notes" text,
    "created_by" uuid,
    "created_at" timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now()),
    "updated_at" timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now()),
    "shipping_charges" numeric DEFAULT 0
);

CREATE TABLE IF NOT EXISTS public."subscription_features" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "feature_name" text NOT NULL,
    "feature_code" text NOT NULL,
    "description" text,
    "category" text NOT NULL DEFAULT 'features'::text,
    "is_active" boolean DEFAULT true,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."subscription_history" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "business_id" uuid NOT NULL,
    "subscription_id" uuid,
    "action" text NOT NULL,
    "old_package_id" uuid,
    "new_package_id" uuid,
    "old_price" numeric,
    "new_price" numeric,
    "changed_by" uuid,
    "notes" text,
    "created_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."subscription_packages" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "package_name" text NOT NULL,
    "package_code" text NOT NULL,
    "description" text,
    "price" numeric NOT NULL,
    "currency" text DEFAULT 'USD'::text,
    "billing_cycle" text DEFAULT 'monthly'::text,
    "features" jsonb DEFAULT '[]'::jsonb,
    "max_users" integer DEFAULT 0,
    "max_locations" integer DEFAULT 0,
    "max_products" integer DEFAULT 0,
    "max_storage_gb" integer DEFAULT 0,
    "is_active" boolean DEFAULT true,
    "is_popular" boolean DEFAULT false,
    "sort_order" integer DEFAULT 0,
    "created_at" timestamp with time zone DEFAULT now(),
    "updated_at" timestamp with time zone DEFAULT now(),
    "created_by" uuid
);

CREATE TABLE IF NOT EXISTS public."subscription_payments" (
    "id" uuid NOT NULL DEFAULT uuid_generate_v4(),
    "subscription_id" uuid NOT NULL,
    "amount" numeric NOT NULL,
    "currency" character varying DEFAULT 'USD'::character varying,
    "payment_method" character varying,
    "payment_status" character varying DEFAULT 'pending'::character varying,
    "transaction_id" character varying,
    "payment_date" timestamp with time zone DEFAULT now(),
    "due_date" timestamp with time zone,
    "notes" text,
    "created_at" timestamp with time zone DEFAULT now()
);

CREATE TABLE IF NOT EXISTS public."subscription_plans" (
    "id" uuid NOT NULL DEFAULT uuid_generate_v4(),
    "name" character varying NOT NULL,
    "description" text,
    "price" numeric NOT NULL,
    "billing_period" character varying NOT NULL DEFAULT 'monthly'::character varying,
    "features" jsonb DEFAULT '[]'::jsonb,
    "max_users" integer DEFAULT 5,
    "max_businesses" integer DEFAULT 1,
    "storage_limit_gb" integer DEFAULT 10,
    "is_active" boolean DEFAULT true,
    "is_popular" boolean DEFAULT false,
    "sort_order" integer DEFAULT 0,
    "created_at" timestamp with time zone DEFAULT now()
);

